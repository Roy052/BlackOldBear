# OldBlackBear
 <div>
    <h2> 게임 정보 </h2>
    <img src = "https://img.itch.zone/aW1nLzk0MDU3MDQucG5n/347x500/Y94HvQ.png"><br>
    <img src="https://img.shields.io/badge/Unity-yellow?style=flat-square&logo=Unity&logoColor=FFFFFF"/>
    <img src="https://img.shields.io/badge/Adventure-blue"/>
    <img src="https://img.shields.io/badge/Action-green"/>
    <img src="https://img.shields.io/badge/Rythm-orange"/>
    <h4> 개발 일자 : 2022.07 <br><br>
    <팀원> <br><br>
      <table border="1">
        <tr>
          <th>
            Roy052 
          </th>
          <th>
            맵 배치 및 생성, 상점 등기타 씬, 이벤트 보조
          </th>
          <th>
          </th>
        </tr>
        <tr> 
            <th> crihit </th>
          <th> 전투 기능 구현 및 패턴 제작</th>
          <th> https://github.com/crihit </th>
        </tr>
        <tr> 
            <th> CheeseCake116 </th>
          <th> 패턴 에디터 제작 및 패턴 제작 </th>
          <th> https://github.com/CheeseCake116 </th>
        </tr>
        <tr> 
            <th> SUNGWHANYOON </th>
          <th> 이벤트 씬 제작 </th>
          <th> https://github.com/SUNGWHANYOON </th>
        </tr>
        <tr> 
            <th> solorsystem1 </th>
          <th> 전투 기능 구현 및 패턴 제작 </th>
          <th> https://github.com/solorsystem1 </th>
        </tr>
      </table>
    게임 플레이 : https://goodstarter.itch.io/black-old-bear
  </div>
  <div>
    <h2> 게임 설명 </h2>
    <h3> 스토리 </h3>
     겨울을 맞아 잠에 든 곰은 누군가의 인기척에 잠에서 깨어납니다.<br><br>
     칼을 든 늑대들을 본 곰은 정신을 차리고 순식간에 적들을 베어냅니다.<br><br>
     왜 이들이 이곳에 있는 걸까요?<br><br>
     늑대는 무슨 꿍꿍이를 가지고 있는 걸까요?<br><br>
     늑대들을 잡아가며 숨겨진 비밀을 찾아내야 합니다.
    <h3> 게임 플레이 </h3>
     </div>
     
      맵 화면 : 맵에 있는 칸을 눌러 그 지역(전투, 상자, 화톳불 등)으로 이동한다.<br><br> 
     
      상점을 제외한 지역은 들어간 이후에 사라진다.<br><br>
      
      전투 화면 : 자신에게 다가오는 늑대에게 마우스를 돌리고 가까워진 타이밍에 마우스 왼쪽 버튼을 눌러 공격한다.
      
      노래가 끝날 때까지 살아남아 모든 적들을 물리치면 전투가 종료된다.
      
      상자 화면 : 상자를 클릭해 보상을 받는다.
      
      화톳불 화면 : 체력 회복 또는 아이템을 소모해 최대 체력을 증가시킨다.
      
      상점 화면 : 자신이 가진 돈을 이용해 악세서리를 구매하거나 아이템을 구매한다. 상점은 이동해도 사라지지 않는다.
      
      이벤트 화면 : 상황마다 다른 선택지가 등장하며 선택지마다 추가적인 이벤트가 있을 수 있다.
      
      보스 화면 : 강력한 적과 전투한다.
   
   <div>
      <h3> 추가 내용 </h3>
      'GIGDC 2022' 출품작이다.
  </div>
  <div>
    <h2> 게임 스크린샷 </h2>
      <table>
        <td><img src = "https://img.itch.zone/aW1hZ2UvMTYwNzI4Ny85Njc0NTkzLnBuZw==/347x500/B5eEhl.png"></td>
        <td><img src = "https://img.itch.zone/aW1hZ2UvMTYwNzI4Ny85Njc0NTk1LnBuZw==/347x500/ZT07IN.png"></td>
        <td><img src = "https://img.itch.zone/aW1hZ2UvMTYwNzI4Ny85Njc0NTk0LnBuZw==/347x500/0B7pRI.png"></td>
      </table>
  </div>
  <div>
    <h2> 게임 플레이 영상 </h2>
    https://youtu.be/-fc0AM8Kmko
  </div>
  <div>
    <h2> 배우고 느낀 점</h2>
    <table border="1">
        <tr>
          <th> Roy052 </th>
          <th align=left> 로그라이크 게임의 특성상 절차적인 맵 생성을 중요하게 여겼고 이를 위해 전반적인 맵 구성을 담당하며 다른 씬들과의 연계성에 중점을 두고 작업했습니다. <br>유니티를 활용해 다양한 기능을 구현하며 많은 것을 배운 것 같고 팀원들과 함께 작업하는 것이 오랜만이라 서로 힘을 합쳐 나가는 것이 즐거웠습니다.<br> 물론 첫 시도해보는 장르라 아이디어 측면이나 개발 측면에 많은 문제가 따랐으나 서로 머리를 맞대며 해결해나가는 경험이 된 것 같습니다. </th>
        </tr>
        <tr> 
            <th> crihit </th>
          <th align=left> 그간 게임개발에 꾸준히 관심을 가져왔지만 완성까지 이르렀던적이 거의 없었는데 이번 기회에 하나의 게임을 끝까지 개발하게 되어 즐거운 경험이었습니다.<br> 저희 게임의 특징이 리듬게임의 요소를 포함하고 있는것인데 평소 리듬게임을 즐길때는 몰랐지만 재밌는 패턴을 만드는것은 상상이상으로 어려운 일이라는걸 느꼈습니다.<br> 앞으로 다른 게임을 할때의 느낌이 많이 다를것같습니다.</th>
        </tr>
        <tr> 
            <th> CheeseCake116 </th>
          <th align=left> 깔끔하고 짜임새있는 리듬 패턴을 제작하기 위해서는 패턴에디터가 필요해보였고, 이에 따라 에디터씬을 만들어서 필요한 패턴을 쉽게 제작할 수 있도록 했습니다.<br> 전투씬에서 사방에서 늑대가 몰려올 수 있도록 방사형으로 뻗친 형태의 에디터를 구상하였는데요, 처음으로 만들어보는 형태라서 여러 아이디어가 떠오르게 되니까 그런 부분이 재미있었던 것 같습니다.<br> 한편으로는 생소한 장르의 게임이다보니 개발 아이디어를 내기가 어려웠던 점이 있었습니다.<br> 그래도 이번 경험을 통해 앞으로도 좀 더 폭넓은 장르의 게임을 구상할 수 있으리라 생각합니다. </th>
        </tr>
        <tr> 
            <th> SUNGWHANYOON </th>
          <th align=left> 이번 프로젝트를 진행하면서 유니티를 처음사용했는데, 이전에 객체 지향 프로그램을 다룬적도 있었지만 게임제작은 처음이라 쉽지 않았던 것 같습니다.<br> 그래도 이렇게 저렇게 배워가면서 제가 만든 게임이 작동하는 것이 신기했고 그걸 보면서 재밌었고 보람있었던 것 같습니다. </th>
        </tr>
        <tr> 
            <th> solorsystem1 </th>
          <th align=left> 이번 프로젝트를 진행하면서 익숙하지 않았던 C# 언어에 익숙해 질 수 있었고 전투 기능을 구현하면서 학교에서 배운 이론적인 부분을 적극 활용하면서 프로그램을 제작해 볼 수 있는 경험이 되었습니다.<br> 또한 유니티를 사용하여 팀원과 함께 하나의 게임을 완성해 볼 수 있었던 좋은 경험이었습니다. </th>
        </tr>
      </table>
  </div>
  <div>
  <h2> Design Picture </h2>
   <table>
        <td><img src = "https://postfiles.pstatic.net/MjAyMjA4MDFfOCAg/MDAxNjU5MzMwNzQ4MDAy.mRmaSfPnZaYNq2aqFUwG8fpu872_7042woK15eZJTr8g.-7QrODgx_vFJFEJzvRc6MrLXnbgWYV3d73bxykRM_qog.JPEG.tdj04131/KakaoTalk_20220801_141114267_01.jpg?type=w773" height = 500></td>
        <td><img src = "https://postfiles.pstatic.net/MjAyMjA4MDFfMjMx/MDAxNjU5MzMwNzQ3OTgx.TPrNiRB3ek2NJjvQ8g77a6oO2rwiyml4RbPcc39nfiQg.7bk1KobuX_at6OvZD8oLlGDj-H9Op5mHXYTCuOcmkssg.JPEG.tdj04131/KakaoTalk_20220801_141114267_02.jpg?type=w773" height = 500></td>
        <td><img src = "https://postfiles.pstatic.net/MjAyMjA4MDFfMTcg/MDAxNjU5MzMwNzQ3OTc1.mZ7ErPGxuqZrKdhiDdRoMbxG-Tv-9eXp-BQasuvIxvog.A9pz2I3o2FIP7H3B8paKvIqYlu0kaji3f4to3v21Neog.JPEG.tdj04131/KakaoTalk_20220801_141114267.jpg?type=w773" height = 500></td>
      </table>
  </div>

   <div>
       <h2> 주요 코드 </h2>
       <h4> MapScript 맵 불러오는 함수 </h4>
    </div>
    
```csharp
//Map 생성 파트
mapRecorder = gameManagerObject.GetComponent<MapRecorder>();

//기록 없음
if (mapRecorder.recorded == false)
{
    //Text 파트
    StartCoroutine(MapTextONandOFF());

    MapArrayBuilding();
    VisitableMapArrayBuilding();

    mapRecorder.RecordMap(map);
    mapRecorder.RecordVisitableMap(visitableMap);

    mapRecorder.currentPosition.y = 0;
    mapRecorder.currentPosition.x = 1;
}
//기록 있음
else
{
    mapText.text = "";
    mapTextShadow.text = "";
    map = mapRecorder.ReturnMap();
    visitableMap = mapRecorder.ReturnVisitableMap();
}

//맵 이미지 형태로 제작
StartCoroutine(MapImageBuilding());

if(map[1, stagePerMapSize[stageNum]-1] != 1)
{
    nextStageButton.SetActive(false);
}

StartCoroutine(fadeManager.FadeIn(GameManager.FadeTimeGap));
}
```

<div>
    <h4> MapScript 속 맵 배열 제작 함수 </h4>
</div> 

```csharp
void MapArrayBuilding()
{
    //Initialize
    map = new int[3, stagePerMapSize[stageNum]];
    System.Array.Clear(map, 0, map.Length);

    //Temp Map Array
    tempMapArray = new int[stagePerMapSize[stageNum] - 2];
    int tempMapSum = 0;
    float meanSum = stageSum[stageNum] / (float) stagePerMapSize[stageNum];
    Debug.Log(meanSum);

    //First Value In
    tempMapArray[0] = UnityEngine.Random.Range(0, 3) + 1;
    tempMapSum = tempMapArray[0];

    //After Value In
    for (int i = 1; i < tempMapArray.Length; i++){
        int tempValue = UnityEngine.Random.Range(0,3) + 1;
        
        //Current sum is more than mean sum, 맵 모양 잡기
        if( (tempMapSum + tempValue) > meanSum * (i + 1) )
        {
            if (tempValue != 1)
                tempValue -= 1;
        }
        else
        {
            if (tempValue != 3)
                tempValue += 1;
        }

            tempMapArray[i] = tempValue;
            tempMapSum += tempValue;
    }

    //tempMapArray fit in stageSum
    if (stageSum[stageNum] > tempMapSum)
    {
        for (int i = 0; i < stageSum[stageNum] - tempMapSum; i++)
        {
            for(int j = 0; j < tempMapArray.Length ; j++)
            {
                if(tempMapArray[j] == 3) continue;
                else
                {
                    tempMapArray[j]++;
                    break;
                 }
             }
        }

    }
    else if(stageSum[stageNum] < tempMapSum)
    {
        for (int i = 0; i < tempMapSum - stageSum[stageNum] ; i++)
        {
            for (int j = tempMapArray.Length - 1; j > 0; j--)
            {
                if (tempMapArray[j] == 1) continue;
                else
                {
                    tempMapArray[j]--;
                    break;
                }
             }
        } 
    }

    //Number To Map Apperance
    int[,] mapApperance_two = { { 0, 1 }, { 1, 2 }};

    int tempMapApperance = -1;
    for (int i = 0; i < tempMapArray.Length; i++)
    {
        //Full
        if (tempMapArray[i] == 3)
        {
            map[0, i + 1] = 1; map[1, i + 1] = 1; map[2, i + 1] = 1;
        }
        else if (tempMapArray[i] == 2)
        {
            tempMapApperance = UnityEngine.Random.Range(0, 2);
            for (int j = 0; j < 2; j++)
            {
                map[mapApperance_two[tempMapApperance, j], i + 1] = 1;
            }
        }
        else
        {
            map[1, i + 1] = 1;
        }
    }

    //Map Apperance To Map Content
    map[1, 0] = 2; // Start
    map[1, stagePerMapSize[stageNum] - 1] = 9; // Boss
    map[1, stagePerMapSize[stageNum] - 2] = 4; // Bonfire

    for(int i = 0; i < 6; i++)
    {
        for(int j = 0; j < mapContentsRatio[stageNum,i]; j++)
        {
            mapContentQueue.Add(i + 3);
        }
    }

    var mixedMapContentQueue = mapContentQueue.OrderBy(a => Guid.NewGuid()).ToList();

    int count = 0;
    for(int i = 0; i < 3 ; i++)
    {
        for(int j = 1; j < stagePerMapSize[stageNum] - 1; j++)
        {
            if(map[i, j] == 1)
            {
                map[i,j] = mixedMapContentQueue[count++];
            }
        }
    }

    //맵 모양 확인
    string ForDebug = "map\n";
    for (int i = 0; i < 3; i++)
    {
        for(int j = 0; j < stagePerMapSize[stageNum]; j++)
        {
            ForDebug += map[i,j] + ", ";
        }
        ForDebug += "\n";
   }

   Debug.Log(ForDebug);

```
